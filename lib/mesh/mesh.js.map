{"version":3,"sources":["../../src/mesh/mesh.js"],"names":["Mesh","constructor","vertices","faces","label","winding","Vertices","Faces","computeNormals","species","edges","face","Set","center","point","reduce","sum","vertex","length","Point","area","volume","a","normal","Number","update","dispose","toString","JSON","stringify"],"mappings":"yDACA,qCAGA,wCAGA,2CACA,qCAGO,KAAMA,CAAAA,IAAK,CAEhBC,WAAW,CAAC,CAAEC,QAAF,CAAYC,KAAZ,CAAmBC,KAAnB,CAA0BC,OAAO,CAAG,IAApC,CAAD,CAA6C,CAGtD,KAAKH,QAAL,CAAgB,EAAhB,CACA,KAAKC,KAAL,CAAa,EAAb,CAGA,KAAKD,QAAL,CAAgB,GAAII,mBAAJ,CAAaJ,QAAb,CAAuB,IAAvB,CAAhB,CAGA,KAAKC,KAAL,CAAa,GAAII,aAAJ,CAAUJ,KAAV,CAAiB,IAAjB,CAAb,CAGA,GAAIE,OAAJ,CAAa,KAAKF,KAAL,CAAWK,cAAX,GAGb,GAAIH,OAAJ,CAAa,KAAKH,QAAL,CAAcM,cAAd,GAGb,GAAIJ,KAAJ,CAAW,KAAKA,KAAL,CAAaA,KACzB,CAGD,GAAIK,CAAAA,OAAJ,EAAc,CAGZ,MAAO,MACR,CAGD,GAAIC,CAAAA,KAAJ,EAAY,CAGV,GAAIA,CAAAA,KAAK,CAAG,EAAZ,CAGA,IAAK,KAAMC,CAAAA,IAAX,GAAmB,MAAKR,KAAxB,CAA+B,CAG7BO,KAAK,CAAG,CAAC,GAAG,GAAIE,CAAAA,GAAJ,CAAQ,CAAC,GAAGF,KAAJ,CAAW,GAAGC,IAAI,CAACD,KAAnB,CAAR,CAAJ,CACT,CAGD,MAAOA,CAAAA,KACR,CAGD,GAAIG,CAAAA,MAAJ,EAAa,CAGX,KAAMC,CAAAA,KAAK,CAAG,iBAAO,KAAKZ,QAAL,CAAca,MAAd,CAAqB,CAACC,GAAD,CAAMC,MAAN,GAAiB,cAAID,GAAJ,CAASC,MAAT,CAAtC,CAAwD,CAAC,CAAD,CAAI,CAAJ,CAAO,CAAP,CAAxD,CAAP,CAA2E,KAAKf,QAAL,CAAcgB,MAAzF,CAAd,CAGA,MAAO,IAAIC,aAAJ,CAAUL,KAAV,CACR,CAGD,GAAIM,CAAAA,IAAJ,EAAW,CAGT,MAAO,MAAKjB,KAAL,CAAWiB,IACnB,CAGD,GAAIC,CAAAA,MAAJ,EAAa,CAGX,MAAO,iBAAO,KAAKlB,KAAL,CAAWY,MAAX,CAAkB,CAACC,GAAD,CAAML,IAAN,GAAe,cAAIK,GAAJ,CAAS,mBAAS,cAAIL,IAAI,CAACW,CAAT,CAAYX,IAAI,CAACY,MAAjB,CAAT,CAAmCC,MAAM,CAACb,IAAI,CAACS,IAAN,CAAzC,CAAT,CAAjC,CAAkG,CAAlG,CAAP,CAA6G,CAA7G,CACR,CAGDK,MAAM,CAAC,CAAEvB,QAAF,CAAYC,KAAZ,CAAD,CAAsB,CAG1B,KAAKD,QAAL,CAAgB,EAAhB,CACA,KAAKC,KAAL,CAAa,EAAb,CAGA,KAAKD,QAAL,CAAgB,GAAII,mBAAJ,CAAaJ,QAAb,CAAuB,IAAvB,CAAhB,CAGA,KAAKC,KAAL,CAAa,GAAII,aAAJ,CAAUJ,KAAV,CAAiB,IAAjB,CAAb,CAGA,KAAKA,KAAL,CAAWK,cAAX,GAGA,KAAKN,QAAL,CAAcM,cAAd,EACD,CAGDkB,OAAO,EAAG,CAGR,KAAKvB,KAAL,CAAa,IAAb,CACA,KAAKD,QAAL,CAAgB,IAGjB,CAODyB,QAAQ,EAAG,CAGT,MAAOC,CAAAA,IAAI,CAACC,SAAL,CAAe,CACpB3B,QAAQ,CAAE,KAAKA,QADK,CAEpBC,KAAK,CAAE,KAAKA,KAFQ,CAAf,CAIR,CAlHe,C","sourcesContent":["// Import the required math functions\nimport { add, divide, multiply, dot } from '@oneisland/math';\n\n// Import the required geometry modules\nimport { Point } from 'geometry/point';\n\n// Import the required shape modules\nimport { Vertices } from 'shape/vertices';\nimport { Faces } from 'shape/faces';\n\n// Create a new mesh from vertices and faces (indices)\nexport class Mesh {\n\n  constructor({ vertices, faces, label, winding = true }) {\n\n    // Bind an empty array of vertices and faces\n    this.vertices = [];\n    this.faces = [];\n\n    // Bind the vertices to the mesh\n    this.vertices = new Vertices(vertices, this);\n\n    // Bind the faces to the mesh\n    this.faces = new Faces(faces, this);\n\n    // Compute the correct face normals if winding is true\n    if (winding) this.faces.computeNormals();\n\n    // Compute the correcct vertex normals\n    if (winding) this.vertices.computeNormals();\n\n    // Add the label to the mesh if there is one\n    if (label) this.label = label;\n  }\n\n  // Define the species\n  get species() {\n\n    // Define the species as 'Mesh'\n    return 'Mesh';\n  }\n\n  // Compute the edges of the face\n  get edges() {\n\n    // Define the list of edges\n    let edges = [];\n\n    // Iterate through each of the faces\n    for (const face of this.faces) {\n\n      // Add the values to the edges as a set (removing duplicates)\n      edges = [...new Set([...edges, ...face.edges])];\n    }\n\n    // Return the list of edges\n    return edges;\n  }\n\n  // Calculate the center point of the mesh\n  get center() {\n\n    // Calculate the center of all vertices\n    const point = divide(this.vertices.reduce((sum, vertex) => add(sum, vertex), [0, 0, 0]), this.vertices.length);\n\n    // Return the center point\n    return new Point(point);\n  }\n\n  // Calculate the area of the mesh\n  get area() {\n\n    // Return the area of the mesh\n    return this.faces.area;\n  }\n\n  // Calculate the volume of the mesh\n  get volume() {\n\n    // Return the volume of the mesh\n    return divide(this.faces.reduce((sum, face) => add(sum, multiply(dot(face.a, face.normal), Number(face.area))), 0), 3);\n  }\n\n  // Update a mesh with new vertices and faces\n  update({ vertices, faces }) {\n\n    // Clear the vertices and faces\n    this.vertices = [];\n    this.faces = [];\n\n    // Bind the vertices to the mesh\n    this.vertices = new Vertices(vertices, this);\n\n    // Bind the faces to the mesh\n    this.faces = new Faces(faces, this);\n\n    // Compute the correct face normals\n    this.faces.computeNormals();\n\n    // Compute the correcct vertex normals\n    this.vertices.computeNormals();\n  }\n\n  // Dispose the mesh\n  dispose() {\n\n    // Dispose each of the faces and vertices\n    this.faces = null;\n    this.vertices = null;\n\n    // Delete this;\n  }\n\n  // Subtract(mesh) {\n\n  // }\n\n  // Cast the mesh to a string\n  toString() {\n\n    // Return the stringified data on the mesh\n    return JSON.stringify({\n      vertices: this.vertices,\n      faces: this.faces\n    });\n  }\n}"],"file":"mesh.js"}