"use strict";exports.__esModule=true;exports.Plane=void 0;var _math=require("../utils/math");var _line=require("./line");var _point=require("./point");var _vector=require("./vector");var _direction=require("./utils/direction");var _validator=require("../utils/validator");const{validate}=new _validator.Validator("Plane");const PlaneTolerance=1e-4;class Plane{constructor({normal,scalar}){validate({normal,Vector:_vector.Vector});validate({scalar,Number});this.normal=normal;this.scalar=scalar}scale(distance){validate({distance,Number});this.scalar=(0,_math.add)(this.scalar,distance)}lineOfIntersectionWith(plane){validate({plane,Plane});const[n1,s1]=[this.normal,this.scalar];const[n2,s2]=[plane.normal,plane.scalar];const direction=(0,_math.cross)(n1,n2);if(direction==0)return null;const c1=(0,_math.divide)((0,_math.subtract)(s1,(0,_math.multiply)(s2,(0,_math.dot)(n1,n2))),(0,_math.subtract)(1,(0,_math.multiply)((0,_math.dot)(n1,n2),(0,_math.dot)(n1,n2))));const c2=(0,_math.divide)((0,_math.subtract)(s2,(0,_math.multiply)(s1,(0,_math.dot)(n1,n2))),(0,_math.subtract)(1,(0,_math.multiply)((0,_math.dot)(n1,n2),(0,_math.dot)(n1,n2))));const point=(0,_math.add)((0,_math.multiply)(c1,n1),(0,_math.multiply)(c2,n2));return new _line.Line({point:new _point.Point(point),direction:new _direction.Direction(direction)})}}exports.Plane=Plane;